var app=function(t){"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function n(t){if(Array.isArray(t))return t}function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}function o(t,e,n){return e=l(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,d()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){return e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=b(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function c(t,e,n){return(e=A(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},h.apply(null,arguments)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function d(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(d=function(){return!!t})()}function v(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(){y=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new R(r||[]);return i(a,"_invoke",{value:E(t,n,s)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var f="suspendedStart",d="suspendedYield",v="executing",m="completed",p={};function g(){}function w(){}function T(){}var A={};c(A,a,(function(){return this}));var b=Object.getPrototypeOf,k=b&&b(b(M([])));k&&k!==n&&r.call(k,a)&&(A=k);var S=T.prototype=g.prototype=Object.create(A);function I(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,n,r){var i=f;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=C(s,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=l(e,n,r);if("normal"===c.type){if(i=r.done?m:d,c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=l(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(typeof e+" is not iterable")}return w.prototype=T,i(S,"constructor",{value:T,configurable:!0}),i(T,"constructor",{value:w,configurable:!0}),w.displayName=c(T,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,T):(t.__proto__=T,c(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},I(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new x(h(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},I(S),c(S,u,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=M,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function g(t,e){return n(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||b(t,e)||m()}function w(t){return n(t)||v(t)||b(t)||m()}function T(t){return function(t){if(Array.isArray(t))return e(t)}(t)||v(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof e?e:e+""}function b(t,n){if(t){if("string"==typeof t)return e(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}var k={38:88,67:16,17:90},S=[,"#0ff","#01f","#f80","#ff0","#0f0","#909","#f00"],I=[,"#5aa","#549","#a74","#995","#5a4","#747","#954"],x=16,E=Math.ceil(20),C=1,O=2,P={current:{},previous:{},gamepad:null,gamepadState:{},reset:function(){P.current={},P.previous={}},isPressed:function(t){return P.gamepad.buttons[t].pressed},getAnyKey:function(){return Object.values(P.current).some((function(t){return t}))},getNoKeyPress:function(){return Object.values(P.current).every((function(t){return!t}))},getKey:function(t){return!!P.current[t]},getKeyDown:function(t){return!!P.current[t]&&!P.previous[t]},getKeyUp:function(t){return!P.current[t]&&!!P.previous[t]},preUpdate:function(){if(P.gamepad){var t=function(t,e){e&&!P.gamepadState[t]&&(P.set(t),P.gamepadState[t]=!0),!e&&P.gamepadState[t]&&(P.unset(t),P.gamepadState[t]=!1)};P.gamepad=navigator.getGamepads()[P.gamepad.index],t(37,P.gamepad.axes[0]<-.3||P.isPressed(14)),t(39,P.gamepad.axes[0]>.3||P.isPressed(15)),t(32,P.gamepad.axes[1]<-.3||P.isPressed(12)),t(40,P.gamepad.axes[1]>.3||P.isPressed(13)),t(88,P.isPressed(1)||P.isPressed(3)),t(90,P.isPressed(0)||P.isPressed(2)),t(16,P.isPressed(4)||P.isPressed(5)||P.isPressed(6)||P.isPressed(7)),t(27,P.isPressed(8)||P.isPressed(9)||P.isPressed(10))}},postUpdate:function(){Object.entries(P.current).forEach((function(t){var e=g(t,2),n=e[0],r=e[1];P.previous[n]=r}))},set:function(t){var e=k[t]||t;P.previous[e]=P.current[e],P.current[e]=!0},unset:function(t){var e=k[t]||t;P.previous[e]=P.current[e],P.current[e]=!1}};document.addEventListener("keydown",(function(t){var e=t.repeat,n=t.keyCode;e||P.set(n)}),!1),document.addEventListener("keyup",(function(t){var e=t.keyCode;P.unset(e)}),!1),window.addEventListener("gamepadconnected",(function(t){P.gamepad||(P.gamepad=t.gamepad)}));var R=function(){return s((function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a(this,t),this.envelope=e,this.logarithmic=n,this.reset()}),[{key:"reset",value:function(){this.i=0}},{key:"sample",value:function(t){for(;this.i<this.envelope.length-1;){var e=g(this.envelope[this.i],3),n=e[0],r=e[1],i=e[2],o=void 0===i?1:i,a=g(this.envelope[this.i+1],2),s=a[0],u=a[1];if(n<=t&&t<s){var c=(t-n)/(s-n);return c=o>1?Math.pow(c,o):1-Math.pow(1-c,1/o),this.logarithmic?r*Math.pow(u/r,c):r+c*(u-r)}this.i++}return this.envelope[this.envelope.length-1][1]}}])}();function M(){return L.apply(this,arguments)}function L(){return(L=i(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){return requestAnimationFrame(t)}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(t,e){return(t=t.toString()).length>e?Array(e).fill(9).join(""):Array(e-t.length).fill(0).join("")+t}var G,B=new AudioContext,j=B.createDynamicsCompressor();function W(t){(G=B.createGain()).gain.value=.7,G.connect(t),t.connect(j)}j.knee.setValueAtTime(40,0),j.threshold.setValueAtTime(-12,0),j.connect(B.destination);var H=B.sampleRate;function Y(t){return K(t,.5)}function K(t,e){return 2*(t%1<e)-1}function F(){return 2*Math.random()-1}function N(t){return"number"==typeof t?[[0,t],[1,t]]:t}function U(t,e,n,r,i,o){return[t/r,e/r,n/r,i/r,o/r]}function X(t,e){for(var n=0,r=0,i=0;i<t.length;++i){var o=e(i/(t.length-1)),a=t[i],s=a*o[0]+n;t[i]=s,n=a*o[1]-s*o[3]+r,r=a*o[2]-s*o[4]}return t}function Z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.SQRT1_2,r=new R(N(e),!0),i=new R(N(n));return X(t,(function(t){return function(t,e){var n=1/Math.tan(Math.PI*t/H),r=n*n,i=1/e,o=1/(1+i*n+r);return U(o,2*o,o,1,2*o*(1-r),o*(1-i*n+r))}(r.sample(t),i.sample(t))}))}function V(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.SQRT1_2,r=new R(N(e),!0),i=new R(N(n));return X(t,(function(t){return function(t,e){var n=1/Math.tan(Math.PI*t/H),r=n*n,i=1/e,o=1/(1+i*n+r);return U(o*n*i,0,-o*n*i,1,2*o*(1-r),o*(1-i*n+r))}(r.sample(t),i.sample(t))}))}function _(t,e){for(var n=new Float32Array(t*H),r=0;r<n.length;r++)n[r]=e(r/n.length,r/H);return n}function z(t,e){for(var n=new R(e),r=0;r<t.length;r++)t[r]*=n.sample(r/t.length);return t}function q(t){return t/H}function J(t){return Q.apply(this,arguments)}function Q(){return(Q=i(y().mark((function t(e){var n,r,i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e(),Array.isArray(n)||(n=[n]),r=B.createBuffer(n.length,n[0].length,H),i=0;i<n.length;i++)r.getChannelData(i).set(n[i]);return t.next=6,M();case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $(){return V(z(_(.2,F),[[0,0,.5],[.1,.3,.2],[1,0]]),[[0,2e3,.2],[1,800]])}function tt(t){var e=0,n=[],r=0;return t.forEach((function(t){var i=w(t),o=i[0],a=i.slice(1);o<r&&(e+=4),r=o,n.push([e+o].concat(T(a)))})),n}function et(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={};t.forEach((function(t){var a=t.slice(1).join("|");o[a]||(o[a]=n.apply(void 0,[nt(t[1])].concat(T(t.slice(2))))),function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)for(var o=t[i%t.length],a=e[i%e.length],s=Math.min(n+o.length,a.length),u=n;u<s;u++)a[u]=r?o[u-n]:a[u]+o[u-n]}(o[a],e,function(t,e){return Math.round(H*t*60/e)}(t[0],r),i)}))}function nt(t){return 440*Math.pow(2,t/12)}function rt(t,e){return t.forEach((function(t){t[0]+=e})),t}function it(t,e){for(var n=0;n<t.length-1;n++)t[n][2]=t[n+1][0]-t[n][0];return t[t.length-1][2]=e-t[t.length-1][0],t}var ot=function(){return s((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a(this,t),this.channelConfigs=e;var r=B.createGain();this.channels=e.map((function(t){var e=B.createGain();if(e.connect(r),t.sendToReverb){var n=B.createGain();n.gain.value=t.sendToReverb,e.connect(n),n.connect(G)}return{buffer:t.buffer,sourceTarget:e,volume:t.volume,volumeParam:e.gain}})),this.loop=n,r.connect(j)}),[{key:"stop",value:function(){this.channels.forEach((function(t){t.source&&t.source.disconnect(),t.source=null}))}},{key:"fadeOut",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.channels.forEach((function(t){t.volumeParam.linearRampToValueAtTime(0,B.currentTime+e)})),setTimeout((function(){return t.stop()}),1e3*e)}},{key:"tapeStop",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.channels.forEach((function(t){t.source.playbackRate.setValueAtTime(1,B.currentTime),t.source.playbackRate.linearRampToValueAtTime(1e-4,B.currentTime+e)})),setTimeout((function(){return t.stop()}),1e3*e)}},{key:"play",value:function(){var t=this;this.channels.forEach((function(e){e.source&&e.source.disconnect();var n=B.createBufferSource();t.loop&&(n.loop=!0,n.loopStart=t.loop.start,n.loopEnd=e.buffer.duration),n.buffer=e.buffer,n.connect(e.sourceTarget),n.start(),e.source=n,e.volumeParam.setValueAtTime(1,B.currentTime)}))}}])}();function at(t,e){return function(){var n=0;var r=[[0,0],[.01/e,.2,.5],[1-.01/e,.2,.5],[1,0]];return Z(z(_(e,(function(e){var r=0|e*t.length,i=nt(t[r]);return K(n+=q(i),.5-.2*e)})),r),4200)}}var st=at([-2],.1),ut=at([-2,5],.2),ct=at([-2,5,10],.3),ht=at([10,17,10,17,10,5,5,8,8],.5),lt=at([-2,5,-2,10,5,10,15,10,15,17,15,17,22],.6);function ft(){function t(){var t=0,e=[];do{e.push([t,Math.random()]),t+=.01}while(t<=1);return e}var e=t(),n=t(),r=[[0,0,.5],[.05,1,.2],[1,0]];return[z(z(_(4,F),e),r),z(z(_(4,F),n),r)]}var dt=$;var vt=132,mt=176,yt=60*mt/vt,pt=Math.ceil(yt*H),gt=960/vt,wt=[[0,0],[.001,.12,.35],[.04,.02,.3],[1,0,1]];function Tt(t){var e=[[0,Math.min(H/2,18*t),.5],[1,t/3]],n=Math.random();return Z(z(_(4,(function(e){return.4*Y(n+=q(t))+.4*K(2*n,.55)})),wt),e,1)}function At(){var t=new Float32Array(pt);return et(rt(tt([[0,5],[1,1],[1.5,0],[2,-2],[3,1],[3.5,0],[0,-2],[1.5,1],[2,5],[3,3],[3.5,1],[0,0],[.5,-2],[1,-4],[1.5,-7],[2,3],[3,5],[0,1],[1,-2],[2,0],[2.5,-4],[3,-2],[3.5,-7],[0,-6],[.5,3],[1.5,6],[2,10],[3,8],[3.5,6],[0,5],[1.5,1],[2,5],[3,1],[3.5,0],[0,-2],[1.5,-7],[2,-2],[2.5,1],[3,5],[3.5,3],[0,1],[1,-2],[1.96,-3],[2.04,0],[.5,-2],[1.5,1],[2,5],[3,10],[3.5,8],[0,5],[1.5,1],[2,5],[3,3],[3.5,1],[0,0],[1,1],[1.5,3],[2,5],[2.5,0],[3,-2],[3.5,-3],[0,-2],[1,-7],[2,-14],[0,5],[0,1],[0,-2],[2,1],[2,-2],[2,-7],[0,3],[0,-2],[0,-6],[2,0],[2,-2],[2,-6],[0,1],[0,-2],[0,-6],[2,-2],[2,-6],[2,-9],[0,-4],[0,-7],[0,-11],[2,0],[2,-4],[2,-7],[0,-6],[0,-11],[1.5,-2],[1.5,-6],[3,1],[3,-4],[0,3],[0,-2],[1,1],[1,-2],[1.5,0],[1.5,-2],[2,1],[2,-4],[3,0],[3,-4],[0,-6],[0,-11],[1.5,-2],[1.5,-6],[3,1],[3,-4],[0,3],[0,0],[1,1],[1,-4],[1.25,0],[1.25,-4],[1.75,0],[1.75,-3],[3,-7],[3,-12],[0,5],[1,1],[1.5,0],[2,-2],[3,1],[3.25,0],[3.75,-2],[.5,-2],[1.25,-2],[1.5,1],[2,5],[3,3],[3.5,1],[0,0],[.5,-2],[1,-4],[1.25,-7],[2,3],[3,5],[0,1],[1,-2],[2,0],[2.5,-4],[3,-2],[3.25,-7],[3.75,-6],[.5,3],[1.5,6],[2,10],[2.5,10],[3,8],[3.25,6],[3.75,5],[1.5,1],[2,5],[2.5,5],[2.75,1],[3.25,0],[3.75,-2],[.5,-2],[1.25,-2],[1.5,-7],[2,-2],[2.5,1],[3,5],[3.25,3],[3.75,1],[.5,1],[1,-2],[1.96,-3],[2.04,0],[.5,-2],[1.5,1],[2,5],[2.5,5],[3,10],[3.25,8],[3.75,5],[.5,5],[1.25,5],[1.5,1],[2,5],[2.5,5],[3,3],[3.25,1],[3.75,0],[.5,0],[1,1],[1.5,3],[2,5],[2.5,0],[3,-2],[3.25,-3],[0,-2],[1,-7],[1.5,-6],[1.75,-7],[2,-14],[0,5],[0,1],[0,-2],[2,1],[2,-2],[2,-7],[0,3],[0,-2],[0,-6],[2,0],[2,-2],[2,-6],[0,1],[0,-2],[0,-6],[2,-2],[2,-6],[2,-9],[0,-4],[0,-7],[0,-11],[2,0],[2,-4],[2,-7],[0,-6],[0,-11],[1.5,-2],[1.5,-6],[3,1],[3,-4],[0,3],[0,-2],[1,1],[1,-2],[1.25,0],[1.25,-2],[1.75,0],[1.75,-2],[3,-4],[3,-7],[0,-6],[0,-11],[1.5,-2],[1.5,-6],[3,1],[3,-4],[0,3],[0,0],[1,1],[1,-4],[1.5,0],[1.5,-4],[2,0],[2,-3],[2,-7],[3,-7],[3,-12],[3,-15]]),16),t,Tt,vt),t}var bt=[[0,0,1],[.005,.06,.5],[.05,.015,.1],[1,0,1]];function kt(t){var e=0;return Z(z(_(2,(function(){return Y(e+=q(t))})),bt),9500)}var St=[[0,1,3],[.25,0,1/3],[.5,-1,3],[.75,0,1/3],[1,1]];function It(t,e){var n=1/(1e3*e),r=[[0,0,2],[2*n,1,20],[1-2*n,.5],[1,0]],i=[[0,.055],[1,.055*Math.max(0,1-e/3)]],o=0,a=new R([[0,7,2],[15*n,0]]),s=new R(St);return z(z(_(e,(function(e){return(o+=q(t*Math.pow(2,a.sample(e)/12)))>1&&(o-=1,s.reset()),s.sample(o)})),i),r)}var xt=rt(tt([[0,-26],[2,-26],[3.5,-23],[0,-30],[2,-30],[0,-28],[1.5,-28],[2,-31],[3,-31],[0,-26],[1.5,-26],[2,-26],[3,-28],[3.5,-34],[0,-33],[2,-33],[3.5,-33],[0,-23],[1.5,-23],[2,-23],[3,-23],[0,-21],[1,-21],[2,-24],[3,-24],[3.5,-23],[0,-31],[1,-31],[2,-31],[3.5,-26],[0,-30],[1.5,-30],[2,-30],[0,-28],[1.5,-28],[2,-28],[0,-27],[1,-27],[2,-31],[3,-31],[0,-26],[1,-31],[2,-26],[0,-26],[2,-26],[0,-26],[2,-26],[0,-26],[2,-26],[0,-35],[2,-31],[0,-30],[2,-28],[0,-26],[2,-28],[0,-30],[2,-30],[0,-28],[2,-27],[0,-26],[2,-26],[3.5,-23],[0,-30],[2,-30],[0,-28],[1.5,-28],[2,-31],[3,-31],[0,-26],[1.5,-26],[2,-26],[3,-28],[3.5,-34],[0,-33],[2,-33],[3.5,-33],[0,-23],[1.5,-23],[2,-23],[3,-23],[0,-21],[1,-21],[2,-24],[3,-24],[3.5,-23],[0,-31],[1,-31],[2,-31],[3.5,-26],[0,-30],[1.5,-30],[2,-30],[0,-28],[1.5,-28],[2,-28],[0,-27],[1,-27],[2,-31],[3,-31],[0,-26],[1,-31],[2,-26],[0,-26],[.5,-26],[1,-26],[1.5,-26],[2,-26],[2.5,-26],[3,-26],[3.5,-23],[0,-30],[.5,-30],[1,-30],[1.5,-30],[2,-30],[2.5,-30],[3,-30],[3.5,-26],[0,-33],[.5,-33],[1,-33],[1.5,-33],[2,-33],[2.5,-33],[3,-33],[3.5,-33],[0,-35],[.5,-35],[1,-35],[1.5,-35],[2,-31],[2.5,-31],[3,-31],[3.5,-31],[0,-30],[.5,-30],[1,-30],[1.5,-30],[2,-28],[2.5,-28],[3,-28],[3.5,-28],[0,-26],[.5,-26],[1,-26],[1.5,-26],[2,-28],[2.5,-28],[3,-28],[3.5,-28],[0,-30],[.5,-30],[1,-30],[1.5,-30],[2,-30],[2.5,-30],[3,-30],[3.5,-30],[0,-28],[.5,-28],[1,-28],[1.5,-28],[2,-27],[2.5,-27],[3,-27],[3.5,-27]]),16);function Et(){var t=new Float32Array(pt);return et(it(xt,mt),t,It,vt,!0),t}function Ct(){var t=new Float32Array(pt);return et([].concat(T(xt),T(tt([[0,-14],[.5,-7],[.5,-2],[1.5,-7],[1.5,-2],[2,-14],[2.5,-7],[2.5,-2],[3.5,-14],[3.5,-7],[3.5,-2],[0,-18],[.5,-11],[.5,-7],[1.5,-11],[1.5,-7],[2,-18],[2.5,-11],[2.5,-7],[3.5,-11],[3.5,-7],[0,-16],[.5,-12],[.5,-9],[1.5,-16],[1.5,-12],[1.5,-9],[2,-19],[2.5,-12],[2.5,-9],[3,-19],[3.5,-12],[3.5,-9],[0,-14],[.5,-11],[.5,-7],[1,-19],[1.5,-11],[1.5,-7],[2,-26],[3.5,10],[3.667,12],[3.833,13],[.5,-7],[.5,-2],[1.5,-7],[1.5,-2],[2.5,-7],[2.5,-2],[3.5,-7],[3.5,-2],[.5,-11],[.5,-7],[1.5,-11],[1.5,-7],[2.5,-11],[2.5,-7],[3.5,-11],[3.5,-7],[.5,-12],[.5,-9],[1.5,-12],[1.5,-9],[2.5,-12],[2.5,-9],[3.5,-12],[3.5,-9],[.5,-11],[.5,-7],[1.5,-11],[1.5,-7],[2.5,-11],[2.5,-7],[3.5,-11],[3.5,-7],[.5,-14],[.5,-9],[1.5,-14],[1.5,-9],[2.5,-14],[2.5,-9],[3.5,-14],[3.5,-9],[.5,-7],[.5,-4],[1.5,-7],[1.5,-4],[2.5,-7],[2.5,-4],[3.5,-7],[3.5,-4],[.5,-6],[.5,-2],[1.5,-6],[1.5,-2],[2.5,-6],[2.5,-2],[3.5,-6],[3.5,-2],[.5,-7],[1,-2],[1.5,-7],[2.5,-7],[3,-7],[3,-3],[3.5,-3],[3.5,0],[.5,-6],[.5,-2],[.5,1],[1.5,-6],[1.5,-2],[1.5,1],[2.5,-6],[2.5,-2],[2.5,1],[3.5,-6],[3.5,-2],[3.5,1],[.5,-4],[.5,0],[.5,3],[1.5,-4],[1.5,0],[1.5,3],[2.5,-4],[2.5,0],[2.5,3],[3.5,-4],[3.5,0],[3.5,3],[.5,-3],[.5,0],[.5,3],[1.5,-3],[1.5,0],[1.5,3],[2.5,-3],[2.5,1],[2.5,5],[3.5,-3],[3.5,1],[3.5,5],[0,1],[0,5],[1,-3],[1,0],[2,-7],[1,-7],[1,-2],[3,-7],[3,-2],[1,-6],[1,-2],[3,-6],[3,-2],[1,-6],[1,-2],[3,-6],[3,-2],[1,-4],[1,0],[3,-4],[3,0],[1,-2],[1,1],[3,0],[3,3],[1,1],[1,5],[3,0],[3,3],[1,-2],[1,1],[3,-2],[3,1],[1,-4],[1,1],[1,5],[3,-3],[3,0],[3,5],[3.5,10],[3.667,12],[3.833,13],[.5,-7],[.5,-2],[1.5,-7],[1.5,-2],[2.5,-7],[2.5,-2],[3.5,-7],[3.5,-2],[.5,-11],[.5,-7],[1.5,-11],[1.5,-7],[2.5,-11],[2.5,-7],[3.5,-11],[3.5,-7],[.5,-12],[.5,-9],[1.5,-12],[1.5,-9],[2.5,-12],[2.5,-9],[3.5,-12],[3.5,-9],[.5,-11],[.5,-7],[1.5,10],[1.5,-11],[1.5,-7],[1.667,12],[1.833,13],[2,12],[2.5,-11],[2.5,-7],[2.5,8],[3,10],[3.25,5],[3.5,-11],[3.5,-7],[3.75,6],[.5,-14],[.5,-9],[1.5,-14],[1.5,-9],[2.5,-14],[2.5,-9],[3.5,-14],[3.5,-9],[.5,-7],[.5,-4],[1.5,-7],[1.5,-4],[2.5,-7],[2.5,-4],[3.5,-7],[3.5,-4],[.5,-6],[.5,-2],[1.5,-6],[1.5,-2],[2.5,-6],[2.5,-2],[3.5,-6],[3.5,-2],[.5,-7],[1,-2],[1.5,-7],[2.5,-7],[3,-7],[3,-3],[3.5,-3],[3.5,0],[.5,-6],[.5,-2],[.5,1],[1.5,-6],[1.5,-2],[1.5,1],[2.5,-6],[2.5,-2],[2.5,1],[3.5,-6],[3.5,-2],[3.5,1],[.5,-4],[.5,0],[.5,3],[1.5,-4],[1.5,0],[1.5,3],[2.5,-4],[2.5,0],[2.5,3],[3.5,-4],[3.5,0],[3.5,3],[.5,-3],[.5,0],[.5,3],[1.5,-3],[1.5,0],[1.5,3],[2.5,-3],[2.5,1],[2.5,5],[3.5,-3],[3.5,1],[3.5,5],[0,1],[0,5],[1,-3],[1,0],[2,-7],[3.5,10],[3.667,12],[3.833,13],[1,-7],[1,-2],[3,-7],[3,-2],[1,-6],[1,-2],[3,-6],[3,-2],[1,-6],[1,-2],[3,-6],[3,-2],[1,-4],[1,0],[3,-4],[3,0],[1,-2],[1,1],[3,0],[3,3],[1,1],[1,5],[3,0],[3,3],[1,-2],[1,1],[3,-2],[3,1],[1,-4],[1,1],[1,5],[3,-3],[3,0],[3,5],[3.5,10],[3.667,12],[3.833,13]]))),t,kt,vt),t}function Ot(){return Pt.apply(this,arguments)}function Pt(){return(Pt=i(y().mark((function t(){var e,n,r,i,o;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([At,Ct,Et].map((function(t){return J(t)})));case 2:return e=t.sent,n=g(e,3),r=n[0],i=n[1],o=n[2],t.abrupt("return",new ot([{buffer:r,sendToReverb:.5},{buffer:i,sendToReverb:.5},{buffer:o}],{start:gt}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Rt=.333,Mt=120,Lt=Rt+20,Dt=60*Lt/Mt,Gt=Math.ceil(Dt*H);function Bt(){var t=new Float32Array(Gt);return et([[0,-6],[.167,-4]].concat(T(rt([[0,-2],[1,-2],[1.333,-2],[1.667,-2],[2,0],[2.5,0],[2.667,-4],[2.833,-9],[3,0],[3.667,3],[4,5],[4,10],[5,5],[5,10],[5.667,2],[5.833,3],[6,5],[7.667,2],[7.833,3],[8,5],[8.333,10],[8.667,8],[9,5],[9.667,3],[10,5],[10.333,3],[10.667,5],[11,2],[11.667,-4],[12,-14],[12.167,-7],[12.25,-2],[12.333,0],[12.5,2]],Rt))),t,Tt,Mt),t}function jt(){var t=new Float32Array(Gt);return et(rt([].concat(T(function(t){for(var e=0,n=t.length;e<n;e++){var r=w(t[e]),i=r[0],o=r[1],a=r.slice(2);t.push([i,o+12].concat(T(a)))}return t}([[0,-18],[1,-18],[1.333,-18],[1.667,-18],[2,-16],[3,-16],[3.667,-16],[4,-14],[8,-14],[9,-16],[10,-17],[11,-19]])),[[4.333,5],[4.667,10],[5,14],[5.333,10]]),Rt),t,kt,Mt),t}function Wt(){var t=new Float32Array(Gt);return et(it(rt([[0,-30],[1,-30],[1.333,-30],[1.667,-30],[2,-28],[3,-28],[3.667,-28],[4,-26],[8,-26],[9,-28],[10,-29],[11,-31],[12.25,-26]],Rt),Lt),t,It,Mt,!0),z(t,[[0,1],[.9,1],[1,0]]),t}function Ht(){return Yt.apply(this,arguments)}function Yt(){return(Yt=i(y().mark((function t(){var e,n,r,i,o;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([Bt,jt,Wt].map((function(t){return J(t)})));case 2:return e=t.sent,n=g(e,3),r=n[0],i=n[1],o=n[2],t.abrupt("return",new ot([{buffer:r,sendToReverb:.5},{buffer:i,sendToReverb:.5},{buffer:o}]));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Kt,Ft,Nt,Ut,Xt,Zt,Vt,_t={dataUrl:"data:image/gif;base64,R0lGODlh8AAGAIAAAP///////yH5BAEAAAEALAAAAADwAAYAAALXjAOny4ngTHwRuivthdn244FgSHWbp52SWJrI+ipVHIfaeFboPfeiv0oFWYwFBsaBvYBHYoOWmC2V0Z9VZsxSi1Xp6AGeDsfiMnYLrKmVtG3xDHU6c1EbiZpM1/PaZbJdU+WW9QfYNSVYlrj4QaSH6BhJyHPD5jVxZ/nktRbIIZSGZvTXUwk4xBm3oWqDmBnnJnioSNrH9gR32Ye5KQl7pagKfPs4KEsMzDgR+GvMcjz7yzuIO6pD1/hMcodJyhe0nWeH0vDtiYPGk9y4TKHMLVPI23SpUQAAOw=="},zt={dataUrl:"data:image/gif;base64,R0lGODlh0wASAIAAAP///wAAACH5BAEAAAEALAAAAADTABIAAAL/BIKpYdv8IDQU0fjukSmuflmbqJFZKU7op46au2HHO8dwatqguTsjHpLQWidiTeH5DD3LlzFF+yGdT05F6DzprNmbqjf15bBKDPTGlIrP4TUZ+EuWXTguryHXHrl0Ga8OBtcyCJLG8QZYpljoxyYY+PVXV4SFp1YUJKOZGWXYpkfIuNPUxnIYuNKE4inaWkVZkbp1laZH2xknRTlxalHoU8LK4iecYxk0rObwS9RDjLwL+9uYPAeb+zSEeMytrNptOWqzlWh9W30YvtZoq25XyjiLrS2bXhOLDGybjeZVnHyl1yNEzvzBODewnKmFDBs6fAgxosSJFCtalBgCHK6N4RyDdfwIMmQUIyJL4jOJMuDFlSxbunwJM6bDPgx8jaNTs4MrXRlVRsrp6yfQMfSgjQkaz9VPXZKayiRzZMbQGJOQ5mSKRKdVqlpxDv2qNezVrVbBxiFrD6lXsDCluhXClipXb8uydrV7Fuhatl/zcg2K1W5dwDWl6hWr7CVNuZLmjuXV18zdyYBXAVOiD2eqy2IRE75quXPMxTYxP7aCdzBav6kpl+3MOq7q11PL/j3N9ynD2LE/w27tG/dtvoEf0xXsuXbf1ch1QzSqfOmtk7VybTp4M2/y4X9kVf8dSujTAgA7",frames:[{x:0,y:0,w:52,h:10,oX:26,oY:4},{x:53,y:0,w:67,h:10,oX:33,oY:4},{x:121,y:0,w:45,h:10,oX:22,oY:4},{x:0,y:11,w:14,h:5,oX:7,oY:3},{x:15,y:11,w:38,h:7,oX:19,oY:3},{x:54,y:11,w:43,h:7,oX:21,oY:3},{x:98,y:11,w:39,h:7,oX:19,oY:3},{x:139,y:11,w:39,h:7,oX:19,oY:3},{x:167,y:0,w:44,h:10,oX:22,oY:4}]},qt={dataUrl:"data:image/gif;base64,R0lGODlhEQAIAPD/AAAAAP///yH5BAUAAAIALAAAAAARAAgAAAIclIBgywsBg2rsRTjpuVgbe03ZsXFZcoZelaxGAQA7",frames:[{x:0,y:0,w:8,h:8,oX:4,oY:4},{x:9,y:0,w:8,h:8,oX:4,oY:4},{x:18,y:0,w:8,h:8,oX:4,oY:4}]},Jt={dataUrl:"data:image/gif;base64,R0lGODlhTwArAIAAAP///wAAACH5BAEAAAEALAAAAABPACsAAAL/jI+pywcNo5y0vYqzjnf7CoTiSJbmeX5Up2ZsC8eyZc5LKoeMbge88vtccK/WsOZTPVDMptOZ3CxFPSm1KJlWYTosJLg1enfjsBVEppod6tvE+yrHWGN53dddT/O7BAkPJWcEGDiCULYXFba39NVn4adHqOhW+eiwRmlnaYDE9ifUNvkZB3Qo5UHniMl62ooh6GYIN9lRpKoRazrbhwL4qhuZW9t79drp6oLKK2uMLEwqSigNG2XbhvsMzUnJhZ1seCyerJ1zyny5vcs3o4rOTR7p3H4+bwpZ3Gjjbq9+fz8kzRM1pZLcySKQ1rBb1Mal8+fwjUJ4HB5GHEQxyy0gIsFobPTTkaOtT+Z+aWuYqgsYLiATLXqZcR/Mf2ZCoonZoAAAOw==",frames:[{x:0,y:0,w:79,h:43,oX:39,oY:0}]},Qt={dataUrl:"data:image/gif;base64,R0lGODlhMwAuAKIAACKxTKNJpACi6P/yAP9/J////+0cJAAAACH5BAEAAAcALAAAAAAzAC4AAAP/eLpc9o/JSattMMPL+zGYJoIU4Z3OqEpEe3ZqTC7me6XyaL+5vB8DTowx/E0iH91RZKSQVk5N0wKNbi41ntI6o00V1eiklb0EK+FTmUdML7pfdDG+y3EK5PVZsRfaJ3h5LnQ9EoGCgwUDizBLPgqIgnyLfXWPkgeSlJuVYEhcTHkMopybElJUSoM0ZECljG+oqaFrra6MnLGysxuRraaTsG6Ovb4mlAy5c3IZmb7BEqaPzMWYt5XSf6eottGwycg94s4WyN7C4kWrrLcTwEnptLUu5uDf8PFIxjX1C+90APFp8PVqAICDCA8KWMhwYYCHEB8GnLgi0jVTCQ8uaChAbYFEjwE8ySP16kBGjRwXHoC48mOsUWvAMdCoAGVHBSpbstwGs5u/PjRNAjiQk+hNnWJY+Zw086TRjUd38mRX4Z7TpzhvRgw5FRIimQtoIjTKEalUTz1F/WwadijZnC5dTowTg+CrkwpTCtjKMgEAOw==",frames:[{x:0,y:0,w:51,h:46,oX:25,oY:0}]};function $t(t){return new Promise((function(e){var n=new Image;n.onload=function(){t.renderable=n,e(t)},n.src=t.dataUrl}))}var te=J((function(){return V(z(_(.1,F),[[0,.5,.2],[.3,0],[.301,.4,.2],[.5,0],[.501,.35,.2],[1,0]]),1800,3)})),ee=J((function(){return V(z(_(.2,F),[[0,.3,.2],[1,0]]),1800,2)})),ne=J($),re=J((function(){return V(z(_(.1,F),[[0,.1,.2],[1,0]]),2e3)})),ie=[J(st),J(ut),J(ct),J(lt)],oe=J((function(){return V(z(_(.2,F),[[0,.2,.2],[1,0]]),2e3)})),ae=J(dt),se=J((function(){var t=new R([[0,5],[.3,12],[.6,10]]),e=0;function n(t){return t%=1,e=t*=(3-2*t)*t,Math.sin(2*Math.PI*e);var e}return z(_(.25,(function(r){var i=t.sample(r);return n(e+=q(nt(i)))})),[[0,0,.1],[.3,.3,20],[.5,0],[.6,0,.1],[.8,.3],[1,0]])})),ue=J(ht);function ce(){return he.apply(this,arguments)}function he(){return(he=i(y().mark((function t(){var e,n,r;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=B.createConvolver(),n=ft(),(r=B.createBuffer(2,n[0].length,H)).getChannelData(0).set(n[0]),r.getChannelData(1).set(n[1]),e.buffer=r,W(e),t.next=9,M();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function le(){return fe.apply(this,arguments)}function fe(){return(fe=i(y().mark((function t(){var e,n,r,i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([re,te,ee,ne].concat(ie,[oe,ae,se,ue]));case 2:return t.next=4,Promise.all([$t(_t),$t(zt),$t(qt),$t(Jt),$t(Qt)]);case 4:return e=t.sent,n=g(e,5),Kt=n[0],Ft=n[1],Nt=n[2],Ut=n[3],Xt=n[4],t.next=13,ce();case 13:return t.next=15,Promise.all([Ot(),Ht()]);case 15:r=t.sent,i=g(r,2),Zt=i[0],Vt=i[1],document.body.classList.remove("l");case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var de=6,ve=6;function me(t){return t.length*de}var ye={".":[0,2],":":[2,2],"!":[4,2],"+":[6,6],"-":[12,6],",":[18,3]};function pe(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=e,a=n,s=0,u=0,c=0;c<t.length;c++)if(" "===t[c])s+=de+i;else if("\n"===t[c])s=0,u+=ve+2;else{var h=ye[t[c]],l=void 0,f=de;h?(l=h[0],f=h[1]):l=t[c]<"A"?25+(t.charCodeAt(c)-48)*de:85+(t.charCodeAt(c)-65)*de,be.drawImage(Kt.renderable,l,0,f-1,ve,o+r*s,a+r*u,r*(f-1),r*ve),s+=f+i}}function ge(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;pe(t,e,n,r,1),pe(t,e+r,n,r,1)}function we(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;pe(t,e-me(t)/2,n,r)}function Te(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;ge(t,e-(0|function(t){return t.length*(de+1)}(t)/2),n,r)}var Ae=document.querySelector("canvas"),be=Ae.getContext("2d");function ke(){be.setTransform(1,0,0,1,0,0)}function Se(t,e,n,r){be.fillRect(t,e,n,r),be.strokeRect(t,e,n,r)}function Ie(t,e,n){be.save(),be.translate(t,e),n(),be.restore()}function xe(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;Ie(e,n,(function(){be.rotate(a),be.scale(i,o);var e=t.frames[r];be.drawImage(t.renderable,e.x,e.y,e.w,e.h,-e.oX,-e.oY,e.w,e.h)}))}be.imageSmoothingEnabled=!1;var Ee=function(){return s((function t(){a(this,t),this.rotation=0,this.x=0,this.y=0,this.scared=!1,this.fleeing=!1,this.eyesIndex=0,this.eyeDirection=[0,0],this.eyeUpdateTimer=0,this.randomness=.01}),[{key:"move",value:function(t,e){this.x+=t,this.y+=e}},{key:"rotateCW",value:function(){this.rotation=(this.rotation+1)%4}},{key:"rotateCCW",value:function(){this.rotation=(this.rotation+3)%4}},{key:"step",value:function(){if(this.eyeUpdateTimer++,this.eyeUpdateTimer>60&&Math.random()<this.randomness){if(this.eyesIndex)this.eyesIndex=0;else if(Math.random()<.4)return this.eyeUpdateTimer=50,this.randomness=1,void(this.eyesIndex=1);this.eyeUpdateTimer=0,this.randomness=.01,this.eyeDirection=[4*Math.random()-2,4*Math.random()-2]}}},{key:"getEyesPosition",value:function(){return this.getBlockPositions()[1]}},{key:"lookDown",value:function(){this.eyeDirection=[0,2],this.eyeUpdateTimer=30,this.randomness=1}}])}();function Ce(t,e,n){return function(r){function i(){return a(this,i),o(this,i,arguments)}return f(i,r),s(i,[{key:"getId",value:function(){return t}},{key:"getColor",value:function(){return S[t]}},{key:"getBlockPositions",value:function(){var t=this;return e[this.rotation].map((function(e){var n=g(e,2),r=n[0],i=n[1];return[t.x+r,t.y+i]}))}},{key:"getWallKicksCW",value:function(){return n[this.rotation]}},{key:"getWallKicksCCW",value:function(){return n[(this.rotation+3)%4].map((function(t){var e=g(t,2);return[-e[0],-e[1]]}))}}])}(Ee)}var Oe,Pe=[[[0,0],[-1,0],[-1,1],[0,-2],[-1,-2]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[1,0],[1,1],[0,-2],[1,-2]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]]],Re=Ce(6,[[[0,0],[-1,0],[0,1],[1,0]],[[0,0],[0,1],[1,0],[0,-1]],[[0,0],[1,0],[0,-1],[-1,0]],[[0,0],[0,-1],[-1,0],[0,1]]],Pe),Me=[[0,1],[1,1],[0,0],[1,0]],Le=Ce(4,[Me,Me,Me,Me],[]);function De(t){return Ge.apply(this,arguments)}function Ge(){return Ge=i(y().mark((function t(e){var n,r,i,o,a=arguments;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:1,r=a.length>2&&void 0!==a[2]&&a[2],i=B.createBufferSource(),t.next=5,e;case 5:i.buffer=t.sent,r&&i.connect(G),1!==n?((o=B.createGain()).gain.setValueAtTime(n,0),i.connect(o),i.onended=function(){return o.disconnect(j)},o.connect(j)):i.connect(j),i.start();case 9:case"end":return t.stop()}}),t)}))),Ge.apply(this,arguments)}var Be=0,je=0,We=1;function He(t){Oe=t}function Ye(t){Be+=t}var Ke=function(){return s((function t(e,n){a(this,t),this.tetromino=e,this.board=n}),[{key:"step",value:function(){this.handleTetromino(),this.board.updateTetrominoPosition(this.tetromino),this.removeTetromino&&this.board.removeTetromino(this.tetromino)}},{key:"move",value:function(t,e){return this.tetromino.move(t,e),this.invalidState()?(this.tetromino.move(-t,-e),!1):(this.lastMove=0,!0)}},{key:"rotateCCW",value:function(){var t=this.tetromino.getWallKicksCCW();this.tetromino.rotateCCW();var e,n=u(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(this.tetromino.move(r[0],r[1]),this.validState())return this.lastMove=1,!0;this.tetromino.move(-r[0],-r[1])}}catch(t){n.e(t)}finally{n.f()}return this.tetromino.rotateCW(),!1}},{key:"rotateCW",value:function(){var t=this.tetromino.getWallKicksCW();this.tetromino.rotateCW();var e,n=u(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(this.tetromino.move(r[0],r[1]),this.validState())return this.lastMove=1,!0;this.tetromino.move(-r[0],-r[1])}}catch(t){n.e(t)}finally{n.f()}return this.tetromino.rotateCCW(),!1}},{key:"invalidState",value:function(){return this.board.invalidPosition(this.tetromino)}},{key:"validState",value:function(){return!this.invalidState()}}])}(),Fe=function(t){function e(t,n){var r;return a(this,e),(r=o(this,e,[t,n])).inputDelayTimer=P.getKey(37)||P.getKey(39)?0:12,r.repeatTimer=0,r.updateGravity(),r.lockResetCount=0,r.lockResetY=1e3,r.lockTimer=-1,r.dropTimer=r.gravity,r.manualDropTimer=0,r.lastOnFloor=!1,r.lastMove=null,r}return f(e,t),s(e,[{key:"updateGravity",value:function(){this.gravity=60*Math.pow(.8-.007*(We-1),We-1)}},{key:"handleTetromino",value:function(){this.updateGravity();var t=this.tetromino.x,e=this.tetromino.rotation;this.handleMovement(),this.handleRotation(),this.handleFall();var n=this.onFloor();n&&!this.lastOnFloor&&De(ee),n||(this.lockTimer=0),!n||t===this.tetromino.x&&e===this.tetromino.rotation||this.delayLock(),n&&this.lockTimer<=0&&this.delayLock(),this.lockTimer>0&&(this.lockTimer--,n?0===this.lockTimer&&this.lock():this.lockTimer=0),this.lastOnFloor=n}},{key:"delayLock",value:function(){this.lockResetCount<14?(this.lockTimer=30,this.lockResetCount++):this.lock()}},{key:"lock",value:function(){De(ne),this.done=!0}},{key:"handleMovement",value:function(){var t=P.getKey(37)?-1:P.getKey(39)?1:0;t&&(P.getKeyDown(37)||P.getKeyDown(39)?(this.move(t,0)&&De(re),this.inputDelayTimer=12):this.inputDelayTimer<=0&&this.repeatTimer<=0&&(this.move(t,0)&&De(re),this.repeatTimer=2),this.inputDelayTimer--,this.repeatTimer--)}},{key:"handleRotation",value:function(){var t=this.tetromino instanceof Le;P.getKeyDown(90)?(t||this.rotateCCW())&&De(te):P.getKeyDown(88)&&(t||this.rotateCW())&&De(te)}},{key:"handleFall",value:function(){if(P.getKeyDown(32))this.hardDrop();else{var t=0;P.getKeyDown(40)&&(this.manualDropTimer=0);var e=!1;if(this.gravity<1/this.board.height)t=this.board.height;else{if(e=P.getKey(40))for(this.manualDropTimer--;this.manualDropTimer<=0;)t++,this.manualDropTimer+=this.gravity/30;for(this.dropTimer--;this.dropTimer<=0;)e||t++,this.dropTimer+=this.gravity}for(var n=0,r=0;r<t&&this.move(0,-1);r++)n++;n>0&&(this.lockResetCount>0&&this.lockResetCount--,e&&(Ye(n),De(re)))}}},{key:"hardDrop",value:function(){for(var t=0;this.move(0,-1);)t++;Ye(2*t),De(oe),this.done=!0}},{key:"onFloor",value:function(){if(!this.move(0,-1))return!0;this.move(0,1)}}])}(Ke),Ne=function(){return s((function t(e){a(this,t),this.tLimit=e,this.t=0,this.relativeT=0}),[{key:"step",value:function(){this.t++,this.relativeT=this.t/this.tLimit,this.t===this.tLimit&&(this.done=!0)}}])}(),Ue=function(t){function e(t,n){var r;return a(this,e),(r=o(this,e,[30])).level=t,r.rows=n,r}return f(e,t),s(e,[{key:"render",value:function(){var t=this.t<20?this.t:0;be.fillStyle=this.t<20?"rgba(255,255,255,".concat(this.t/15,")"):"#000";var e,n=u(this.rows);try{for(n.s();!(e=n.n()).done;){var r=e.value;be.fillRect(-t,(this.level.tileCountY-1-r)*x,this.level.width+2*t,x)}}catch(t){n.e(t)}finally{n.f()}}}])}(Ne),Xe=function(){return s((function t(e){a(this,t),this.colorId=e,this.dead=0}),[{key:"getColor",value:function(){return this.dead?I[this.colorId]:S[this.colorId]}},{key:"step",value:function(){this.dead=1}}])}(),Ze=new Xe(1),Ve=function(){return s((function t(e,n){a(this,t),this.width=e,this.height=n,this.heightWithMargin=this.height+4,this.grid=[];for(var r=0;r<this.heightWithMargin;r++)this.grid.push(Array(this.width).fill(0));this.tetrominoes=new Set,this.entities=new Set,this.tetrominoPositions=new Map}),[{key:"isSolidAt",value:function(t,e){return!!this.getItemAt(t,e)}},{key:"getItemAt",value:function(t,e){return t<0||t>=this.width||e<0?Ze:this.grid[e][t]}},{key:"isEmptyRow",value:function(t){return this.grid[t].every((function(t){return!t}))}},{key:"isFullRow",value:function(t){return this.grid[t].every((function(t){return t}))}},{key:"overflows",value:function(t){if(this.grid[this.height+2].some((function(t){return t})))return!0;var e,n=u(t.getBlockPositions());try{for(n.s();!(e=n.n()).done;){var r=g(e.value,2),i=r[0],o=r[1];if(this.grid[o+this.height][i+this.width/2-1])return!0}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"putTetromino",value:function(t){var e,n=[],r=u(t.getBlockPositions());try{for(r.s();!(e=r.n()).done;){var i=g(e.value,2),o=i[0],a=i[1];this.grid[a][o]=t,n.push([o,a])}}catch(t){r.e(t)}finally{r.f()}this.tetrominoPositions.set(t,n),this.tetrominoes.add(t),this.entities.add(t)}},{key:"updateTetrominoPosition",value:function(t){var e,n=u(this.tetrominoPositions.get(t));try{for(n.s();!(e=n.n()).done;){var r=g(e.value,2),i=r[0],o=r[1];this.grid[o][i]=0}}catch(t){n.e(t)}finally{n.f()}this.putTetromino(t)}},{key:"removeTetromino",value:function(t){this.tetrominoes.delete(t),this.entities.delete(t),this.tetrominoPositions.delete(t);var e,n=u(t.getBlockPositions());try{for(n.s();!(e=n.n()).done;){var r=g(e.value,2),i=r[0],o=r[1];this.grid[o][i]=0}}catch(t){n.e(t)}finally{n.f()}}},{key:"clearRows",value:function(t){var e=this;t.sort((function(t,e){return t-e}));for(var n=new Map,r=0,i=0;i<this.heightWithMargin;i++)i===t[r]?(this.forEachItemInRow(i,(function(t){t instanceof Xe&&e.entities.delete(t)})),r++):(this.forEachItemInRow(i,(function(t){t instanceof Ee&&n.set(t,r)})),this.grid[i-r]=this.grid[i]);var o,a=u(n);try{for(a.s();!(o=a.n()).done;){var s=g(o.value,2),c=s[0],h=s[1];c.y-=h,this.putTetromino(c)}}catch(t){a.e(t)}finally{a.f()}for(var l=this.heightWithMargin-r;l<this.heightWithMargin;l++)this.grid[l]=Array(this.width).fill(0)}},{key:"forEachItemInRow",value:function(t,e){for(var n=0;n<this.width;n++){var r=this.grid[t][n];r&&e(r)}}},{key:"getTetrominoesInRows",value:function(t){var e,n=new Set,r=u(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;this.forEachItemInRow(i,(function(t){t instanceof Ee&&n.add(t)}))}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"changeTetrominoesToBlocks",value:function(t){var e,n=u(t);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,o=u(i.getBlockPositions());try{for(o.s();!(r=o.n()).done;){var a=g(r.value,2),s=a[0],c=a[1];this.grid[c][s]=new Xe(i.getId()),this.entities.add(this.grid[c][s])}}catch(t){o.e(t)}finally{o.f()}this.tetrominoes.delete(i),this.entities.delete(i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"emptyRow",value:function(t){this.grid[t].fill(0)}},{key:"invalidPosition",value:function(t){var e,n=u(t.getBlockPositions());try{for(n.s();!(e=n.n()).done;){var r=g(e.value,2),i=r[0],o=r[1];if(i<0||i>=this.width||o<0)return!0;if(!(o>=this.grid.length)){var a=this.grid[o][i];if(a&&a!==t)return!0}}}catch(t){n.e(t)}finally{n.f()}return!1}}])}(),_e=function(t){function e(t,n){var r;return a(this,e),(r=o(this,e,[n?120:200])).isGameOver=n,r.level=t,r.row=0,r.clearAnimations=[],r.addAnimation(),r.scaleSampler=new R([[0,0],[.4,0,2],[.45,2.5,1.5],[.5,2]]),r}return f(e,t),s(e,[{key:"step",value:function(){h(l(e.prototype),"step",this).call(this),this.t>2&&this.row<this.level.board.height&&this.addAnimation(),this.blinkingTimer++,this.clearAnimations.forEach((function(t){t.step()}))}},{key:"addAnimation",value:function(){this.t=0,this.clearAnimations.push(new Ue(this.level,[this.row])),this.row++}},{key:"render",value:function(){if(this.clearAnimations.forEach((function(t){return t.render()})),this.t>10){var t=this.level.width/2,e=this.scaleSampler.sample((this.t-10)/60);this.isGameOver||xe(Ft,t,112,8,e,e),this.t>=this.tLimit&&(this.t-this.tLimit)%60<30&&we("LOCK HST TO START NEW GAME",t,160)}}}])}(Ne),ze=function(t){function e(t){var n;return a(this,e),(n=o(this,e,[30])).score=t,n.x=60*Math.random(),n}return f(e,t),s(e,[{key:"render",value:function(){this.done||(be.globalAlpha=1-Math.pow(this.relativeT,2),pe((this.score>0?"+":"")+this.score,20+this.x,294-this.t/2,2),be.globalAlpha=1)}}])}(Ne),qe=function(t){function e(){var t;return a(this,e),(t=o(this,e,[120])).scaleSampler=new R([[0,0],[.1,0,2],[.2,1.3,1.5],[.3,1],[.9,1,2]]),t}return f(e,t),s(e,[{key:"render",value:function(){if(!this.done){var t="BACK-TO-BACK",e=this.scaleSampler.sample(this.relativeT);pe(t,-me(t)/2*e,150,e)}}}])}(Ne),Je=function(t){function e(t){var n;return a(this,e),(n=o(this,e,[120])).type=t,n.isMini=[C,O].includes(t),n.textIndex=c(c(c(c(c(c(c(c({},3,2),C,2),O,2),4,2),5,2),6,2),10,0),11,1)[t],n.bottomTextIndex=c(c(c(c({},O,4),4,4),5,5),6,6)[t],void 0===n.textIndex&&(n.done=!0),n.scaleSampler=new R([[0,0,2],[.1,1.75,1.5],[.2,1],[.9,1,2],[1,1.4]]),n.scale2Sampler=new R([[0,0,6],[.2,1.2,1.5],[.3,1]]),n.rotationSampler=new R([[0,2===n.textIndex?2*Math.PI:0,.04],[1,0]]),n}return f(e,t),s(e,[{key:"render",value:function(){if(!this.done){var t=this.relativeT,e=this.scaleSampler.sample(t),n=this.scale2Sampler.sample(t),r=this.rotationSampler.sample(t);this.isMini&&xe(Ft,0,100,3,e,e),xe(Ft,0,112,this.textIndex,e,e,r),this.bottomTextIndex&&xe(Ft,0,130,this.bottomTextIndex,n,n)}}}])}(Ne),Qe=Ce(1,[[[-1,0],[0,0],[1,0],[2,0]],[[1,1],[1,0],[1,-1],[1,-2]],[[-1,-1],[0,-1],[1,-1],[2,-1]],[[0,1],[0,0],[0,-1],[0,-2]]],[[[0,0],[-2,0],[1,0],[-2,-1],[1,2]],[[0,0],[-1,0],[2,0],[-1,2],[2,-1]],[[0,0],[2,0],[-1,0],[2,1],[-1,-2]],[[0,0],[1,0],[-2,0],[1,-2],[-2,1]]]),$e=Ce(3,[[[-1,0],[0,0],[1,0],[1,1]],[[0,1],[0,0],[0,-1],[1,-1]],[[-1,0],[0,0],[1,0],[-1,-1]],[[0,1],[0,0],[0,-1],[-1,1]]],Pe),tn=Ce(2,[[[-1,0],[0,0],[1,0],[-1,1]],[[0,1],[0,0],[0,-1],[1,1]],[[-1,0],[0,0],[1,0],[1,-1]],[[0,1],[0,0],[0,-1],[-1,-1]]],Pe),en=Ce(5,[[[-1,0],[0,0],[0,1],[1,1]],[[0,1],[0,0],[1,0],[1,-1]],[[1,0],[0,0],[0,-1],[-1,-1]],[[0,-1],[0,0],[-1,0],[-1,1]]],Pe),nn=Ce(7,[[[1,0],[0,0],[0,1],[-1,1]],[[0,-1],[0,0],[1,0],[1,1]],[[-1,0],[0,0],[0,-1],[1,-1]],[[0,1],[0,0],[-1,0],[-1,-1]]],Pe),rn=function(){return s((function t(){a(this,t),this.tetrominoes=[Qe,$e,tn,Re,Le,en,nn];for(var e=6;e>1;e--){var n=0|Math.random()*(e+1),r=this.tetrominoes[n];this.tetrominoes[n]=this.tetrominoes[e],this.tetrominoes[e]=r}}),[{key:"pick",value:function(){return this.tetrominoes.pop()}}])}(),on=function(){return s((function t(){a(this,t),this.bag=new rn}),[{key:"getNext",value:function(){var t=this.bag.pick();return t?new t:(this.bag=new rn,this.getNext())}}])}(),an="1",sn={"-1":"2",1:"3"},un=function(t){function e(t,n){var r;return a(this,e),(r=o(this,e,[t,n])).cachedInstructions=[],r.timer=0,r.cachedInstructionsIndex=0,r.timerDuration=We>5?1:2,r.manouvered=0,r.lastDirection=1,r}return f(e,t),s(e,[{key:"handleTetromino",value:function(){this.done||(this.tetromino.fleeing=!0,this.timer++,this.timer===this.timerDuration&&(this.timer=0,this.escape()))}},{key:"escape",value:function(){if(Ye(5*-We),this.cachedInstructionsIndex<this.cachedInstructions.length){switch(this.cachedInstructions[this.cachedInstructionsIndex]){case an:this.move(0,1),De(re);break;case"2":this.move(-1,0),De(re);break;case"3":this.move(1,0),De(re);break;case"4":this.rotateCW(),De(te);break;case"5":this.rotateCCW(),De(te)}this.cachedInstructionsIndex++}else{if(!this.move(0,1))return this.manouvered>10?(this.tetromino.fleeing=!1,void(this.done=!0)):(this.manouvered++,this.cachedInstructionsIndex=0,void(this.cachedInstructions=this.getInstructionsToGetFree()));De(re)}this.tetromino.y>this.board.height&&(this.done=!0,this.removeTetromino=!0)}},{key:"isFreeableTetromino",value:function(){var t=this.tetromino.x,e=this.tetromino.y,n=this.tetromino.rotation;return this.cachedInstructions=this.getInstructionsToGetFree(),this.tetromino.x=t,this.tetromino.y=e,this.tetromino.rotation=n,!!this.cachedInstructions}},{key:"getInstructionsToGetFree",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===e)return"";var r=this.tetromino.x,i=this.tetromino.y,o=this.tetromino.rotation,a=function(){t.tetromino.x=r,t.tetromino.y=i,t.tetromino.rotation=o};if(this.move(0,1)&&this.move(0,1))return n+an+an;if(a(),this.tetromino.fleeing&&this.move(0,1))return n+an;if(a(),this.move(0,1)){var s=this.getInstructionsToGetFree(e-1,n+an);if(s)return s}if(a(),this.move(this.lastDirection,0)){var u=this.getInstructionsToGetFree(e-1,n+sn[this.lastDirection]);if(u)return u}if(a(),this.move(-this.lastDirection,0)){this.lastDirection=-this.lastDirection;var c=this.getInstructionsToGetFree(e-1,n+sn[this.lastDirection]);if(c)return c}if(a(),!(this.tetromino instanceof Le)){if(this.rotateCCW()){var h=this.getInstructionsToGetFree(e-1,n+"5");if(h)return h}if(a(),this.rotateCW()){var l=this.getInstructionsToGetFree(e-1,n+"4");if(l)return l}a()}return""}}])}(Ke),cn=function(t){function e(t,n){var r;return a(this,e),(r=o(this,e,[120])).x=t,r.y=n,r.dy=F(),r.dx=F(),r}return f(e,t),s(e,[{key:"step",value:function(){h(l(e.prototype),"step",this).call(this),this.dy+=.5,this.y+=this.dy,this.x+=this.dx}},{key:"render",value:function(){xe(Nt,this.x-4,this.y,0),xe(Nt,this.x+4,this.y,0)}}])}(Ne),hn=function(){return s((function t(e){a(this,t),this.scene=e}),[{key:"render",value:function(){this.scene.paused=!0,this.scene.render(),this.scene.paused=!1,ke(),be.fillStyle="rgba(0,0,0,0.8)",be.fillRect(0,0,Ae.width,Ae.height)}}])}(),ln=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a(this,e),(n=o(this,e,[t])).firstTime=r,P.reset(),n}return f(e,t),s(e,[{key:"step",value:function(){(P.getKeyDown(27)||this.firstTime&&P.getAnyKey())&&He(this.scene)}},{key:"render",value:function(){h(l(e.prototype),"render",this).call(this),be.setTransform(1,0,0,1,Ae.width/2,0),be.scale(2,2),Te("PAUSED",0,30),be.scale(.5,.5),Te("INSTRUCTIONS",0,100);pe("YOUR GOAL IS PLAIN AND SIMPLE.\n\nMAKE 200 LINES WITH THE TETROMINOES THAT FALL DOWN\nEITHER AS FAST AS POSSIBLE OR WITH AN END SCORE AS\nHIGH AS POSSIBLE.\nTHERE IS ONE CATCH THOUGH: THESE TETROMINOES WILL\nTRY FLEEING ONCE THEY REALIZE THEIR FATE IS TO BE\nDISINTEGRATED! SO TRY TO NEUTRALIZE THEM BEFORE\nTHEY GO BACK UP.\n\nTRY TO CLEAR AS MUCH LINES AT THE SAME TIME AS\nPOSSIBLE, AND ALSO TRY OUT SOME TRICKS... THEY MIGHT\nREWARD YOU SOME EXTRA POINTS...\n\nGOOD LUCK!",-50*de/2,118),be.setTransform(1,0,0,1,Ae.width/2-100,248),Te("KEYBOARD CONTROLS",0,0),pe("UN/PAUSE GAME   - ESC\nHARD DROP       - SPACE\nSOFT DROP       - ARROW DOWN\nROTATE CLOCKW   - ARROW UP/X\nROTATE C CLOCKW - CTRL/Z\nHOLD            - SHIFT/C\n",-83,18),be.setTransform(1,0,0,1,Ae.width/2+100,248),Te("GAMEPAD CONTROLS",0,0),xe(Ut,0,22),pe("HOLD",-12,15),pe("HARD\nDROP",-64,33),pe("SOFT\nDROP",-32,66),pe("ROTATE\nC.CLOCKW",7,66),pe("ROTATE\nCLOCKW",42,36)}}])}(hn);var fn=function(){return s((function t(){a(this,t),this.x=0,this.y=0,this.direction=this.targetDirection=Math.PI/3,this.speed=1}),[{key:"initImage",value:function(){if(!this.image){this.image=document.createElement("canvas"),this.image.width=Ae.width+80,this.image.height=Ae.height+80;for(var t=this.image.getContext("2d"),e=0;e<this.image.width;e+=80)for(var n=0;n<this.image.height;n+=80)t.save(),t.translate(e+28,n+20),t.rotate(-Math.PI/4),t.drawImage(Xt.renderable,-25,-20),t.restore();t.fillStyle="rgba(0,0,0,0.85)",t.fillRect(0,0,this.image.width,this.image.height)}}},{key:"step",value:function(t){var e,n,r,i=t?.5:Math.pow(1.08,We);this.speed=(e=this.speed,r=1/30,e>(n=i)?Math.max(e-r,n):Math.min(e+r,n));var o,a,s,u,c=(o=this.direction,a=this.targetDirection,s=2*Math.PI,2*(u=(a-o)%s)%s-u);this.direction+=c/500,Math.abs(c)<.1&&(this.targetDirection=Math.random()*Math.PI*2),this.x+=Math.cos(this.direction)*this.speed,this.y+=Math.sin(this.direction)*this.speed,this.x<=-80&&(this.x+=80),this.y<=-80&&(this.y+=80),this.x>0&&(this.x-=80),this.y>0&&(this.y-=80)}},{key:"render",value:function(){be.drawImage(this.image,this.x,this.y)}}])}(),dn=new fn,vn=function(){return s((function t(){var e=this;a(this,t),P.reset(),Be=0,je=0,We=1,this.tileCountX=10,this.tileCountY=20,this.time=0,this.board=new Ve(this.tileCountX,this.tileCountY),this.width=x*this.tileCountX,this.height=x*this.tileCountY,this.lastClearWasSpecial=!1,this.clearStreak=0,this.scaredTetrominoControllers=new Set,this.scoreAnimations=[],this.fallingEyes=new Set,be.lineWidth=2,this.background=dn,this.background.initImage(),this.tetrominoSource=new on,this.heldTetromino=null,this.nextTetrominoes=Array.from(Array(6),(function(){return e.tetrominoSource.getNext()})),this.nextTetromino(),this.started=!1,this.allRows=Array.from(Array(this.tileCountY),(function(t,e){return e}))}),[{key:"step",value:function(){if(this.started||(this.started=!0,Vt.fadeOut(.1),Zt.play()),P.getKeyDown(27))He(new ln(this));else{if(this.endAnimation){if(this.endAnimation.done&&P.getAnyKey())return}else this.time++;if(this.updateAnimations(),this.clearAnimation)this.clearAnimation.done&&(this.board.clearRows(this.clearAnimation.rows),this.clearAnimation=null,this.scaredTetrominoControllers=this.getScaredTetrominoControllers(this.fleeingTetrominoesCandidates),this.scaredTetrominoControllers.size>0?this.currentTetromino=null:this.nextTetromino());else{var t=Be;this.updateControllers(),Be!==t&&(this.scoreAnimations.push(new ze(Be-t)),4===this.scoreAnimations.length&&this.scoreAnimations.shift())}}}},{key:"updateAnimations",value:function(){if(this.moveTypeAnimation&&!this.moveTypeAnimation.done&&this.moveTypeAnimation.step(),this.back2BackAnimation&&!this.back2BackAnimation.done&&this.back2BackAnimation.step(),this.background.step(this.endAnimation),!this.clearAnimation||this.clearAnimation.done){this.endAnimation&&this.endAnimation.step();var t,e=u(this.fallingEyes);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.step(),n.done&&this.fallingEyes.delete(n)}}catch(t){e.e(t)}finally{e.f()}var r,i=u(this.scoreAnimations);try{for(i.s();!(r=i.n()).done;){r.value.step()}}catch(t){i.e(t)}finally{i.f()}var o,a=u(this.board.entities);try{for(a.s();!(o=a.n()).done;){o.value.step()}}catch(t){a.e(t)}finally{a.f()}}else this.clearAnimation.step()}},{key:"updateControllers",value:function(){var t=this.scaredTetrominoControllers.size>0||this.endAnimation;if(this.scaredTetrominoControllers.size>0){var e,n=u(this.scaredTetrominoControllers);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.step(),r.done&&this.scaredTetrominoControllers.delete(r)}}catch(t){n.e(t)}finally{n.f()}0===this.scaredTetrominoControllers.size&&(this.scaredTetrominoCheck=!0,this.checkState(this.allRows),this.scaredTetrominoCheck=!1)}if(!t)if(P.getKeyDown(16)&&!this.controller.wasHeld)this.holdTetromino();else if(this.controller.step(),this.controller.done){this.currentTetromino.eyeDirection=[0,0];var i,o=this.currentTetromino.getBlockPositions(),a=new Set,s=u(o);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.add(c[1])}}catch(t){s.e(t)}finally{s.f()}this.checkState(a)}}},{key:"render",value:function(){var t=this;ke(),be.clearRect(0,0,Ae.width,Ae.height),this.background.render();var e=x*this.tileCountX,n=x*this.tileCountY;be.translate((Ae.width-e)/2,(Ae.height-n)/2),be.strokeStyle="#fff",be.fillStyle="#000",Se(-1,-1,e+2,n+2),this.paused||this.renderBoard(),be.translate(e+25,0),be.fillStyle="#000",Se(-16,-1,48,170),pe("TIME:",-17,189),ge(this.getTimeText(),-17,196),pe("LEVEL:",-17,210),ge(D(Math.min(E,We),2),-17,217),pe("LINES:",-17,231),ge(D(je,4),-17,238),pe("SCORE:",-17,297),ge(D(Be,9),-17,309,2);var r,i=u(this.scoreAnimations);try{for(i.s();!(r=i.n()).done;){r.value.render()}}catch(t){i.e(t)}finally{i.f()}this.paused||this.endAnimation||this.renderNextTetrominoes(),ke(),be.translate((Ae.width-e)/2-40,(Ae.height-n)/2+10),be.fillStyle="#000",Se(-17,-11,48,40),ge("HOLD",-6,-8),this.paused||this.endAnimation||!this.heldTetromino||(this.controller.wasHeld?(this.renderGhostTetromino(this.heldTetromino,0,8,2),be.fillStyle="rgba(0,0,0,0.5)",be.fillRect(-8,8,32,x)):this.renderTetromino(this.heldTetromino,8,2)),Ie(-10,50,(function(){t.clearStreak>1&&(xe(Ft,0,0,7),ge("".concat(t.clearStreak<10?" ":"").concat(t.clearStreak-1),-5,7,2)),t.moveTypeAnimation&&t.moveTypeAnimation.render(),t.back2BackAnimation&&t.back2BackAnimation.render()}))}},{key:"getTSpin",value:function(){if(!(this.currentTetromino instanceof Re)||1!==this.controller.lastMove)return!1;var t=this.currentTetromino.x,e=this.currentTetromino.y,n=[this.board.isSolidAt(t-1,e+1),this.board.isSolidAt(t+1,e+1),this.board.isSolidAt(t+1,e-1),this.board.isSolidAt(t-1,e-1)];if(!n[0]+!n[1]+!n[2]+!n[3]>1)return!1;var r=[this.board.getItemAt(t-1,e)===this.currentTetromino,this.board.getItemAt(t,e+1)===this.currentTetromino,this.board.getItemAt(t+1,e)===this.currentTetromino,this.board.getItemAt(t,e-1)===this.currentTetromino];return[n[0]+r[1]+n[1],n[1]+r[2]+n[2],n[2]+r[3]+n[3],n[3]+r[0]+n[0]].filter((function(t){return 3===t})).length<2?C:3}},{key:"checkState",value:function(t){var e,n=[],r=u(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;this.board.isFullRow(i)&&n.push(i)}}catch(t){r.e(t)}finally{r.f()}n.sort((function(t,e){return t-e}));var o=this.getTSpin(),a=n.length,s=this.isAllClearConfig(n);if(this.updateScore(o,a,s),0===a){if(this.board.overflows(this.nextTetrominoes[0]))return void this.setGameOver();this.nextTetromino()}else this.startClearingLines(n),this.currentTetromino=null}},{key:"isAllClearConfig",value:function(t){for(var e=t.length;e<this.tileCountY;e++)if(!this.board.isEmptyRow(e))return!1;return!0}},{key:"startClearingLines",value:function(t){this.clearAnimation=new Ue(this,t);var e=this.board.getTetrominoesInRows(t);this.board.changeTetrominoesToBlocks(e);var n,r=u(e);try{for(r.s();!(n=r.n()).done;){var i=g(n.value.getEyesPosition(),2),o=i[0],a=i[1],s=(this.tileCountY-1-a+.5)*x,c=(o+.5)*x;this.fallingEyes.add(new cn(c,s))}}catch(t){r.e(t)}finally{r.f()}var h,l=this.getScaredTetrominoes(t,e),f=new Set,d=u(l);try{for(d.s();!(h=d.n()).done;){var v=h.value;v.scared&&f.add(v),v.scared=!0,v.lookDown()}}catch(t){d.e(t)}finally{d.f()}this.fleeingTetrominoesCandidates=f}},{key:"updateScore",value:function(t,e,n){Ye(50*We*this.clearStreak),We=0|(je+=e)/10+1,t&&De(se,1,!0),n?(this.setMoveType(11),De(ue,1,!0),Ye(1500*We)):e>0&&(De(ie[e-1],1,!0),this.lastClearWasSpecial&&4===e?(this.setBack2Back(),Ye(1200*We)):Ye({1:100,2:300,3:500,4:800}[e]*We),this.setMoveType(6+e)),3===t?(this.lastClearWasSpecial&&e>0?(this.setBack2Back(),Ye(600*(e+1)*We)):Ye(400*(e+1)*We),this.setMoveType(3+e)):t===C&&(Ye(We*(e+1)*100),this.setMoveType(C+e)),this.scaredTetrominoCheck||(e>0?(this.clearStreak++,this.lastClearWasSpecial=t||4===e):this.clearStreak=0)}},{key:"endGame",value:function(){this.endAnimation=new _e(this),Zt.fadeOut(),setTimeout((function(){return Vt.play()}),700)}},{key:"setGameOver",value:(t=i(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.endAnimation=new _e(this,!0),Zt.tapeStop(),e=localStorage.getItem("playId"),t.next=5,En.submitScore(e,Be);case 5:return localStorage.removeItem("playId"),t.next=8,En.play();case 8:n=t.sent,console.log(n),n.playId&&(localStorage.setItem("playId",n.playId),gn.start());case 11:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"setBack2Back",value:function(){this.back2BackAnimation=new qe}},{key:"setMoveType",value:function(t){t&&(this.moveTypeAnimation=new Je(t))}},{key:"getScaredTetrominoes",value:function(t,e){var n,r=new Set,i=u(t);try{for(i.s();!(n=i.n()).done;)for(var o=n.value,a=0;a<this.tileCountX;a++)r.add("".concat(a,":").concat(o))}catch(t){i.e(t)}finally{i.f()}var s,c=u(e);try{for(c.s();!(s=c.n()).done;){var h,l=u(s.value.getBlockPositions());try{for(l.s();!(h=l.n()).done;){var f=g(h.value,2),d=f[0],v=f[1];r.add("".concat(d,":").concat(v))}}catch(t){l.e(t)}finally{l.f()}}}catch(t){c.e(t)}finally{c.f()}var m,y=1e3,p=-1e3,w=u(r);try{for(w.s();!(m=w.n()).done;){var T=m.value,A=Number(T.split(":")[1]);y=Math.min(A,y),p=Math.max(A,p)}}catch(t){w.e(t)}finally{w.f()}for(var b=new Set,k=y-1;k<=p+1;k++)for(var S=0;S<this.tileCountX;S++)if(!r.has("".concat(S,":").concat(k))){var I=this.board.getItemAt(S,k);if(I instanceof Ee)for(var x=["".concat(S-1,":").concat(k),"".concat(S+1,":").concat(k),"".concat(S,":").concat(k-1),"".concat(S,":").concat(k+1)],E=0;E<4;E++)if(r.has(x[E])){b.add(I);break}}return b}},{key:"getScaredTetrominoControllers",value:function(t){var e,n=new Set,r=u(t);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=new un(i,this.board);o.isFreeableTetromino()&&n.add(o)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"getGhostOffset",value:function(){for(var t=this.currentTetromino.getBlockPositions(),e=[0,0,0,0],n=0;n<4;n++)for(var r=g(t[n],2),i=r[0],o=r[1],a=0;a<=o;a++){var s=o-a,u=this.board.getItemAt(i,s);if(u&&u!==this.currentTetromino)break;e[n]=a}return-Math.min.apply(Math,e)}},{key:"renderBoard",value:function(){for(var t=0;t<this.board.height;t++)for(var e=0;e<this.board.width;e++){var n=this.board.getItemAt(e,t);n&&this.renderBlock(e,this.tileCountY-1-t,n.getColor(),x,n instanceof Xe)}if(!this.endAnimation){var r,i=u(this.board.tetrominoes);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.renderTetrominoEyes(o)}}catch(t){i.e(t)}finally{i.f()}this.currentTetromino&&(this.renderGhostTetromino(this.currentTetromino,this.getGhostOffset(),x,this.tileCountY-1),this.renderTetromino(this.currentTetromino,x,this.tileCountY-1))}this.clearAnimation&&this.clearAnimation.render(),this.endAnimation&&this.endAnimation.render();var a,s=u(this.fallingEyes);try{for(s.s();!(a=s.n()).done;){a.value.render()}}catch(t){s.e(t)}finally{s.f()}}},{key:"renderNextTetrominoes",value:function(){for(var t=8,e=0;e<this.nextTetrominoes.length;e++){var n=this.nextTetrominoes[e];this.renderTetromino(n,t,3),0===e?(be.translate(0,5*t),t*=.75):be.translate(0,4*t)}}},{key:"holdTetromino",value:function(){if(this.board.removeTetromino(this.currentTetromino),this.heldTetromino&&this.board.overflows(this.heldTetromino))this.setGameOver();else{De(ae);var t=this.heldTetromino;this.heldTetromino=this.currentTetromino,this.heldTetromino.x=0,this.heldTetromino.y=0,this.heldTetromino.rotation=0,t?this.updateController(t):this.nextTetromino(),this.controller.wasHeld=!0}}},{key:"updateController",value:function(t){for(this.currentTetromino=t,t.x=this.board.width/2-1,t.y=this.board.height-2,t.eyeDirection=[0,2];this.board.invalidPosition(t);)t.move(0,1);this.board.putTetromino(t),this.controller=new Fe(t,this.board)}},{key:"nextTetromino",value:function(){je>=200?this.endGame():(this.updateController(this.nextTetrominoes.shift()),this.nextTetrominoes.push(this.tetrominoSource.getNext()))}},{key:"renderTetromino",value:function(t,e,n){var r,i=t.getBlockPositions(),o=t.getColor(),a=u(i);try{for(a.s();!(r=a.n()).done;){var s=g(r.value,2),c=s[0],h=s[1];this.renderBlock(c,n-h,o,e)}}catch(t){a.e(t)}finally{a.f()}e===x&&this.renderTetrominoEyes(t)}},{key:"renderTetrominoEyes",value:function(t){be.fillStyle="#000";var e=g(t.getEyesPosition(),2),n=e[0],r=e[1],i=(this.tileCountY-1-r+.5)*x,o=(n+.25)*x,a=(n+.75)*x;if(t.fleeing)t.eyesIndex=0,t.eyeDirection=[0,-2];else if(t.scared){t.eyesIndex=0;var s=2*Math.random()-1;o+=s,a+=s,i+=2*Math.random()-1}xe(Nt,o,i,t.eyesIndex),xe(Nt,a,i,t.eyesIndex),0===t.eyesIndex&&(be.fillRect(o-1+t.eyeDirection[0],i-1+t.eyeDirection[1],2,2),be.fillRect(a-1+t.eyeDirection[0],i-1+t.eyeDirection[1],2,2))}},{key:"renderGhostTetromino",value:function(t,e,n,r){var i=t.getBlockPositions(),o=t.getColor();i.forEach((function(t){return t[1]+=e}));var a,s=u(i);try{for(s.s();!(a=s.n()).done;){var c=g(a.value,2),h=c[0],l=c[1];this.renderGhostBlock(h,r-l,o,n)}}catch(t){s.e(t)}finally{s.f()}}},{key:"renderBlock",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];be.fillStyle=n,be.fillRect(t*r,e*r,r-1,r-1),i||(be.fillStyle="rgba(255,255,255,0.5)",be.fillRect(t*r,e*r,2,r),be.fillRect(t*r,e*r,r,2))}},{key:"renderGhostBlock",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;be.fillStyle=n,be.fillRect(t*r,e*r,r-1,r-1),be.fillStyle="#000",be.fillRect(t*r+1,e*r+1,r-3,r-3)}},{key:"getTimeText",value:function(){var t=0|this.time/60%1*100,e=0|this.time/60,n=0|e/60;return"".concat(D(0|e/3600,2),":").concat(D(n%60,2),":").concat(D(e%60,2),".").concat(D(t,2))}}]);var t}(),mn=function(t){function e(t){var n;return a(this,e),(n=o(this,e,[t])).blinkingTimer=0,n}return f(e,t),s(e,[{key:"step",value:function(){localStorage.getItem("playId")&&He(new ln(this.scene,!0)),this.blinkingTimer++}},{key:"render",value:function(){h(l(e.prototype),"render",this).call(this),be.setTransform(1,0,0,1,Ae.width/2,150),xe(Xt,0,0,0,2,2),this.blinkingTimer%60<30&&we("LOCK HST TO START",0,130)}}])}(hn),yn=0,pn=0,gn={start:function(){setSce(new mn(new vn)),requestAnimationFrame(gn.tick)},tick:function(t){requestAnimationFrame(gn.tick);var e=pn?t-pn:0;if(pn=t,!(1e3/(yn+=e)>67)){yn=0;var n=Oe;P.preUpdate(),n.step(),P.postUpdate(),n.render()}}},wn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Tn={},An={},bn=wn&&wn.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},kn=wn&&wn.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(An,"__esModule",{value:!0}),An.GameService=void 0;var Sn=function(){function t(t,e){this.gameId=t,this.targetOrigin=e,this.eventHandlers=new Map,this.pendingPromises=new Map}return t.prototype.on=function(t,e){this.eventHandlers.set(t,e)},t.prototype.sendMessage=function(t){window.parent.postMessage(t,this.targetOrigin)},t.prototype.init=function(){var t=this;window.addEventListener("message",(function(e){if(e.origin!==t.targetOrigin&&!e.origin.includes("localhost"))throw new Error("Invalid origin: ".concat(e.origin));var n=e.data,r=n.type,i=n.data;if(console.log("Received message: ".concat(r)),t.eventHandlers.has(r)){var o=t.eventHandlers.get(r);o&&o(i)}else if(t.pendingPromises.has(r)){var a=t.pendingPromises.get(r);a&&(a(i),t.pendingPromises.delete(r))}else console.error("Unsupported message type: ".concat(r))})),console.log(" Haste Arcade Game Initialized!")},t.prototype.play=function(){return bn(this,void 0,void 0,(function(){var t=this;return kn(this,(function(e){return[2,new Promise((function(e){t.pendingPromises.set("play",e),t.sendMessage({type:"play",gameId:t.gameId})}))]}))}))},t.prototype.submitScore=function(t,e){return bn(this,void 0,void 0,(function(){var n=this;return kn(this,(function(r){return[2,new Promise((function(r){n.pendingPromises.set("score",r),n.sendMessage({type:"score",gameId:n.gameId,score:e,playId:t})}))]}))}))},t.prototype.getLeaderboard=function(){return bn(this,void 0,void 0,(function(){var t=this;return kn(this,(function(e){return[2,new Promise((function(e){t.pendingPromises.set("leaderboard",e),t.sendMessage({type:"leaderboard",gameId:t.gameId})}))]}))}))},t.prototype.transferHst=function(t){return bn(this,void 0,void 0,(function(){var e=this;return kn(this,(function(n){return[2,new Promise((function(n){e.pendingPromises.set("transferHst",n),e.sendMessage({type:"transferHst",gameId:e.gameId,amount:t})}))]}))}))},t}();An.GameService=Sn;var In,xn={};Object.defineProperty(xn,"__esModule",{value:!0}),xn.Origin=void 0,function(t){t.PROD="https://app.hastearcade.com",t.DEV="https://dev.hastearcade.com"}(In||(xn.Origin=In={})),function(t){var e=wn&&wn.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),n=wn&&wn.__exportStar||function(t,n){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||e(n,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(An,t),n(xn,t)}(Tn);var En=new Tn.GameService("df185b3b-a2c5-4a67-ac62-ee93015e4e1e",Tn.Origin.PROD);localStorage.removeItem("playId"),document.addEventListener("DOMContentLoaded",(function(){En.init(),Cn()}));var Cn=function(){var t=i(y().mark((function t(){var e,n,r;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(){return(r=i(y().mark((function t(){var n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return be.clearRect(0,0,Ae.width,Ae.height),e.style.display="none",document.querySelector("canvas").style.display="block",t.next=5,En.play();case 5:(n=t.sent).playId&&(localStorage.setItem("playId",n.playId),gn.start());case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)},n=function(){return r.apply(this,arguments)},(e=document.getElementById("generate-audio")).style.display="flex",t.next=6,le();case 6:n();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t.haste=En,t}({});
